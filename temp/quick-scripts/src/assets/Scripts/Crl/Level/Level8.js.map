{"version":3,"sources":["assets\\Scripts\\Crl\\Level\\Level8.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Utility from \"../../Mod/Utility\";\r\nimport Stone from \"../Prop/Stone\";\r\nimport LevelBase from \"./LevelBase\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Level8 extends LevelBase {\r\n\r\n    @property(cc.Node)\r\n    waterNode: cc.Node = null\r\n\r\n    desSwitch: boolean = false\r\n\r\n    onEnable() {\r\n        this.schedule(this.updateCB)\r\n    }\r\n\r\n    updateCB() {\r\n        if (this.isGameOver) return\r\n\r\n        if (this.meatNode.isValid && Utility.getWorldDis(Stone.Share.node, this.meatNode) <= 100) {\r\n            this.loseCB()\r\n            return\r\n        }\r\n\r\n        if (!this.desSwitch) {\r\n            for (let i = 0; i < this.waterNode.childrenCount; i++) {\r\n                let w = this.waterNode.children[i]\r\n                if (Utility.getWorldDis(Stone.Share.node, w) <= 111) {\r\n                    this.waterNode.destroyAllChildren()\r\n                    Stone.Share.node.runAction(cc.scaleTo(0.5, 1.2))\r\n                    break\r\n                }\r\n            }\r\n\r\n            for (let i = 0; i < this.waterNode.childrenCount; i++) {\r\n                let w = this.waterNode.children[i]\r\n                if (Utility.getWorldDis(this.DesNode, w) <= 50) {\r\n                    Utility.loadSpriteFrame('Texture/Prop/yxz_dj13_1', this.DesNode.getComponent(cc.Sprite))\r\n                    this.desSwitch = true\r\n                    if (this.Sharp.isValid) {\r\n                        this.canTouch = false\r\n                        this.SharpCrl.moveToPoint(0)\r\n                    }\r\n\r\n                    break\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    async trigger00() {\r\n        this.scheduleOnce(() => {\r\n            this.canTouch = true\r\n        }, 3)\r\n    }\r\n    async trigger10() {\r\n        this.canTouch = true\r\n    }\r\n    async trigger20() {\r\n        this.getNeedleCrlById(3).isAwake = true\r\n        this.scheduleOnce(() => {\r\n            this.canTouch = true\r\n        }, 3)\r\n    }\r\n    async trigger30() {\r\n        await this.playerCrl.moveToPoint(0)\r\n        if (this.desSwitch) {\r\n            await this.playerCrl.moveToPoint(1)\r\n            return\r\n        } else {\r\n            this.loseCB()\r\n        }\r\n    }\r\n}\r\n"]}