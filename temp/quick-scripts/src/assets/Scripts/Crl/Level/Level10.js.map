{"version":3,"sources":["assets\\Scripts\\Crl\\Level\\Level10.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import LevelBase from \"./LevelBase\";\r\nimport ThreeNeedle from \"../Prop/ThreeNeedle\";\r\nimport SlideNeedle from \"../Prop/SlideNeedle\";\r\nimport Utility from \"../../Mod/Utility\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Level10 extends LevelBase {\r\n\r\n    @property(cc.Node)\r\n    pointNode: cc.Node = null\r\n\r\n    @property(cc.Node)\r\n    ThreeNeedle: cc.Node = null\r\n    @property(cc.Node)\r\n    SlideNeedle: cc.Node = null\r\n\r\n    ThreeNeedleCrl: ThreeNeedle = null\r\n    SlideNeedleCrl: SlideNeedle = null\r\n\r\n    onEnable() {\r\n        this.schedule(this.updateCB)\r\n        this.ThreeNeedleCrl = this.ThreeNeedle.getComponent(ThreeNeedle)\r\n        this.SlideNeedleCrl = this.SlideNeedle.getComponent(SlideNeedle)\r\n\r\n        this.ThreeNeedleCrl.closeCB = () => { this.TNCloseCB() }\r\n        this.ThreeNeedleCrl.openCB = () => { this.TNOpenCB() }\r\n        this.SlideNeedleCrl.moveCB = (dty) => { this.SNMoveCB(dty) }\r\n    }\r\n\r\n    async updateCB() {\r\n        if (this.isGameOver) return\r\n        for (let i = 0; i < this.pointNode.childrenCount; i++) {\r\n            let p = this.pointNode.children[i]\r\n            if (Utility.getWorldDis(this.playerNode, p) <= 50 && this.playerCrl.pointIndex != i) {\r\n                this.playerCrl.pointIndex = i\r\n                if (i == 2 && !this.ThreeNeedleCrl.isClosed) {\r\n                    this.SharpCrl.moveToPoint(2)\r\n                }\r\n                break\r\n            }\r\n        }\r\n        for (let i = 0; i < this.pointNode.childrenCount; i++) {\r\n            let p = this.pointNode.children[i]\r\n            if (Utility.getWorldDis(this.Sharp, p) <= 50 && this.SharpCrl.pointIndex != i) {\r\n                this.SharpCrl.pointIndex = i\r\n                break\r\n            }\r\n        }\r\n\r\n        if (this.playerCrl.pointIndex == 0 && !this.SlideNeedleCrl.isBottom) {\r\n            this.SlideNeedleCrl.validTouch = false\r\n        } else {\r\n            this.SlideNeedleCrl.validTouch = this.canTouch\r\n        }\r\n\r\n        if (!this.playerCrl.isMoving && this.playerCrl.pointIndex == 5 && this.getNeedleCrlById(1).switchState > 0) {\r\n            this.canTouch = false\r\n            await this.playerCrl.moveToPoint(6)\r\n            await this.playerCrl.moveToPoint(7)\r\n            this.canTouch = true\r\n        }\r\n\r\n        if (this.SharpCrl.pointIndex == 5 && !this.SharpCrl.isMoving && this.getNeedleCrlById(1).switchState > 0) {\r\n            this.canTouch = false\r\n            await this.SharpCrl.moveToPoint(6)\r\n        }\r\n    }\r\n\r\n    TNCloseCB() {\r\n\r\n    }\r\n    async TNOpenCB() {\r\n        if (this.playerCrl.pointIndex == 0 && this.SlideNeedleCrl.isBottom) {\r\n            this.canTouch = false\r\n            await this.SharpCrl.moveToPoint(2)\r\n            await this.SharpCrl.moveToPoint(0)\r\n        } else if (this.playerCrl.pointIndex == 1 && this.SlideNeedleCrl.isBottom) {\r\n            this.canTouch = false\r\n            await this.SharpCrl.moveToPoint(2)\r\n            await this.SharpCrl.moveToPoint(0)\r\n            this.canTouch = true\r\n        } else if (this.playerCrl.pointIndex == 2) {\r\n            this.canTouch = false\r\n            await this.SharpCrl.moveToPoint(2)\r\n        } else if (this.playerCrl.pointIndex == 4) {\r\n            this.canTouch = false\r\n            await this.playerCrl.moveToPoint(5)\r\n            this.canTouch = true\r\n        }\r\n\r\n        if (this.SharpCrl.pointIndex == 5 && !this.SlideNeedleCrl.isBottom) {\r\n            this.canTouch = false\r\n            await this.SharpCrl.moveToPoint(3)\r\n            this.canTouch = true\r\n        } else if ((this.SharpCrl.pointIndex == 3 || this.SharpCrl.pointIndex == 2) && !this.SlideNeedleCrl.isBottom) {\r\n            this.canTouch = false\r\n            await this.SharpCrl.moveToPoint(5)\r\n            this.canTouch = true\r\n        }\r\n    }\r\n\r\n    async SNMoveCB(dty) {\r\n        if (this.playerCrl.pointIndex == 0 || this.playerCrl.pointIndex == 2) {\r\n            this.playerNode.y += dty\r\n            if (!this.playerCrl.isMoving && this.playerCrl.pointIndex == 2 &&\r\n                !this.SlideNeedleCrl.isBottom && this.ThreeNeedleCrl.isClosed) {\r\n                this.canTouch = false\r\n                await this.playerCrl.moveToPoint(4)\r\n                this.canTouch = true\r\n            } else if (this.playerCrl.pointIndex == 2 && !this.SlideNeedleCrl.isBottom && !this.ThreeNeedleCrl.isClosed) {\r\n                this.canTouch = false\r\n                await this.playerCrl.moveToPoint(5)\r\n                this.canTouch = true\r\n            }\r\n        }\r\n        if (this.SharpCrl.pointIndex == 0 || this.SharpCrl.pointIndex == 2) {\r\n            this.Sharp.y += dty\r\n            if (this.SharpCrl.pointIndex == 2 && !this.SlideNeedleCrl.isBottom && !this.ThreeNeedleCrl.isClosed) {\r\n                this.SharpCrl.moveToPoint(5)\r\n            }\r\n        }\r\n    }\r\n\r\n    async trigger00() {\r\n        if (this.playerCrl.pointIndex == 0) {\r\n            await this.playerCrl.moveToPoint(1)\r\n            this.canTouch = true\r\n        } else if (this.playerCrl.pointIndex == 1) {\r\n            await this.playerCrl.moveToPoint(0)\r\n            this.canTouch = true\r\n        }\r\n    }\r\n    async trigger10() {\r\n\r\n    }\r\n}\r\n"]}