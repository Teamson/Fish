{"version":3,"sources":["assets\\Scripts\\Libs\\PlayerDataMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Utility from \"../Mod/Utility\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nexport class PlayerData {\r\n    grade: number = 1\r\n    coin: number = 0\r\n    power: number = 5\r\n    tipsNum: number = 1\r\n    exitTime: number = 0\r\n}\r\n@ccclass\r\nexport default class PlayerDataMgr {\r\n    private static _playerData: PlayerData = null\r\n    public static powerMax: number = 5\r\n\r\n    //获取用户数据\r\n    public static getPlayerData(): PlayerData {\r\n        if (!localStorage.getItem('playerData')) {\r\n            this._playerData = new PlayerData()\r\n            localStorage.setItem('playerData', JSON.stringify(this._playerData))\r\n        } else {\r\n            if (this._playerData == null) {\r\n                this._playerData = JSON.parse(localStorage.getItem('playerData')) as PlayerData\r\n            }\r\n        }\r\n        return this._playerData\r\n    }\r\n\r\n    //设置用户数据\r\n    public static setPlayerData() {\r\n        localStorage.setItem('playerData', JSON.stringify(this._playerData))\r\n    }\r\n\r\n    public static changeCoin(dt: number) {\r\n        this._playerData.coin += dt\r\n        this.setPlayerData()\r\n    }\r\n    public static changePower(dt: number) {\r\n        this._playerData.power += dt\r\n        this.setPlayerData()\r\n    }\r\n\r\n    public static getPlayerLv(): number {\r\n        if (this._playerData.grade < 3) {\r\n            return 1\r\n        } else if (this._playerData.grade >= 3 && this._playerData.grade < 8) {\r\n            return 2\r\n        } else if (this._playerData.grade >= 8 && this._playerData.grade < 13) {\r\n            return 3\r\n        } else if (this._playerData.grade >= 13 && this._playerData.grade < 18) {\r\n            return 4\r\n        } else {\r\n            return 5\r\n        }\r\n    }\r\n\r\n    public static getLeftLv(): number {\r\n        if (this._playerData.grade < 3) {\r\n            return 3 - this._playerData.grade\r\n        } else if (this._playerData.grade < 8) {\r\n            return 8 - this._playerData.grade\r\n        } else if (this._playerData.grade < 13) {\r\n            return 13 - this._playerData.grade\r\n        } else if (this._playerData.grade < 18) {\r\n            return 18 - this._playerData.grade\r\n        } else {\r\n            return 0\r\n        }\r\n    }\r\n\r\n    public static getNextLvPer(): number {\r\n        let curLv = this.getPlayerLv()\r\n        let curG = this._playerData.grade\r\n        if (curLv == 1) {\r\n            return curG / 2\r\n        } else if (curLv == 2) {\r\n            return curG / 7\r\n        } else if (curLv == 3) {\r\n            return curG / 12\r\n        } else if (curLv == 4) {\r\n            return curG / 17\r\n        } else if (curLv == 5) {\r\n            return 1\r\n        }\r\n    }\r\n\r\n}\r\n"]}