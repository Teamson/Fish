{"version":3,"sources":["assets\\ExportLibs\\View\\DrawUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import JJMgr, { ExportDir } from \"../ExportUtils\";\r\nimport WxApi from \"../../Scripts/Libs/WxApi\";\r\nimport AdMgr from \"../../Scripts/Mod/AdMgr\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class DrawUI extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    item: cc.Node = null\r\n\r\n    @property(cc.ScrollView)\r\n    scroll: cc.ScrollView = null\r\n\r\n    @property(cc.Node)\r\n    content: cc.Node = null\r\n\r\n    @property(cc.Node)\r\n    bgNode: cc.Node = null\r\n\r\n    myNavArr: any[] = []\r\n\r\n    closeCallback: Function = null\r\n\r\n    isAutoClose: boolean = false\r\n    hadTouch: boolean = false\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    showUI(callback?: Function, param?: any) {\r\n        if (callback) {\r\n            this.closeCallback = callback\r\n        }\r\n        if (param && param.isAutoClose) {\r\n            this.isAutoClose = param.isAutoClose\r\n        }\r\n        WxApi.aldEvent('左边抽屉导出弹窗出现次数')\r\n        this.node.active = true\r\n        this.moveDraw(-375, () => { })\r\n    }\r\n\r\n    onEnable() {\r\n        this.myNavArr = [].concat(JJMgr.instance.navigateAppArr)\r\n        this._init()\r\n        if (this.isAutoClose) {\r\n            this.scheduleOnce(() => {\r\n                if (!this.hadTouch)\r\n                    this.closeCB()\r\n            }, 1.5)\r\n        }\r\n    }\r\n\r\n    onDisable() {\r\n        this.unscheduleAllCallbacks()\r\n        this.content.destroyAllChildren()\r\n        this.closeCallback && this.closeCallback()\r\n        this.closeCallback = null\r\n        this.bgNode.x = -1000\r\n        this.hadTouch = false\r\n    }\r\n\r\n    moveDraw(x: number, cb: Function) {\r\n        let a1 = cc.moveTo(0.2, cc.v2(x, this.bgNode.y))\r\n        let a2 = cc.callFunc(cb)\r\n        this.bgNode.runAction(cc.sequence(a1, a2))\r\n    }\r\n\r\n    _init() {\r\n        for (let i = 0; i < this.myNavArr.length; i++) {\r\n            let node: cc.Node = cc.instantiate(this.item)\r\n            node.active = true\r\n            this.content.addChild(node)\r\n\r\n            let name: cc.Label = node.getChildByName('name').getComponent(cc.Label)\r\n            let icon: cc.Sprite = node.getChildByName('icon').getComponent(cc.Sprite)\r\n\r\n            name.string = JJMgr.instance.getSubtitle(i)\r\n            JJMgr.instance.loadImgByUrl(icon, this.myNavArr[i].icon)\r\n\r\n            node.on(cc.Node.EventType.TOUCH_END, (event) => { this.navCB(event, i) }, this)\r\n        }\r\n    }\r\n\r\n    closeCB() {\r\n        this.moveDraw(-1000, () => {\r\n            this.node.active = false\r\n        })\r\n    }\r\n\r\n    navCB(event: cc.Event, id: number) {\r\n        console.log('click id:', id)\r\n        this.hadTouch = true\r\n        WxApi.aldEvent('左边抽屉导出弹窗-总点击数')\r\n        JJMgr.instance.NavigateApp(id, () => {\r\n            JJMgr.instance.showExportUI(ExportDir.VIEW_RECOMMENDUI, null, () => {\r\n                this.scheduleOnce(() => { AdMgr.instance.showBanner() }, 0.1)\r\n            })\r\n        }, () => {\r\n            WxApi.aldEvent('左边抽屉导出弹窗全-总成功跳转数')\r\n        })\r\n    }\r\n\r\n    update(dt) {\r\n        if (!this.hadTouch && this.scroll.isScrolling()) {\r\n            this.hadTouch = true\r\n        }\r\n    }\r\n}\r\n"]}