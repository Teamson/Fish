{"version":3,"sources":["assets\\Scripts\\Crl\\PlayerAni.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uDAAkD;AAE5C,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAG5C;IAAuC,6BAAY;IADnD;QAAA,qEA2EC;QAvEG,oBAAc,GAAY,IAAI,CAAA;QAE9B,sBAAgB,GAAgC,IAAI,CAAA;QACpD,eAAS,GAAyB,IAAI,CAAA;;QAmEtC,iBAAiB;IACrB,CAAC;IAlEG,0BAAM,GAAN;QACI,IAAI,CAAC,WAAW,EAAE,CAAA;IACtB,CAAC;IAED,yBAAK,GAAL;IAEA,CAAC;IAED,+BAAW,GAAX;QACI,oBAAoB;QACpB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;QACvE,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QAC5B,aAAa;QACb,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;QAElD,IAAI,IAAI,CAAC,cAAc;YACnB,IAAI,CAAC,UAAU,CAAC,uBAAa,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,CAAA;QACpD,QAAQ;QACR,6GAA6G;QAC7G,sHAAsH;IAC1H,CAAC;IACD,uCAAmB,GAAnB,UAAoB,KAAK;QACrB,QAAQ,KAAK,EAAE;YACX,KAAK,CAAC;gBACF,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC;gBAC5D,MAAM;YACV,KAAK,CAAC;gBACF,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;gBAC1D,MAAM;YACV,KAAK,CAAC;gBACF,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;gBAC1D,MAAM;YACV,KAAK,CAAC;gBACF,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;gBAC1D,MAAM;YACV,KAAK,CAAC;gBACF,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;gBAC1D,MAAM;SACb;QACD,wCAAwC;IAC5C,CAAC;IAED,yCAAqB,GAArB,UAAsB,KAAK;QACvB,wDAAwD;QACxD,+CAA+C;QAC/C,IAAI;IACR,CAAC;IAED,6CAAyB,GAAzB,UAA0B,KAAK;QAC3B,wCAAwC;QACxC,qBAAqB;QACrB,6DAA6D;QAE7D,IAAI;IACR,CAAC;IAED,8BAAU,GAAV,UAAW,KAAK;QACZ,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,YAAY,GAAG,KAAK,CAAC;QACzD,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1D,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1D,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1D,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1D,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,YAAY,GAAG,KAAK,CAAC;IAC9D,CAAC;IApED;QADC,QAAQ;qDACqB;IAHb,SAAS;QAD7B,OAAO;OACa,SAAS,CA0E7B;IAAD,gBAAC;CA1ED,AA0EC,CA1EsC,EAAE,CAAC,SAAS,GA0ElD;kBA1EoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["import PlayerDataMgr from \"../Libs/PlayerDataMgr\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PlayerAni extends cc.Component {\r\n\r\n    @property\r\n    autoChangeSkin: boolean = true\r\n\r\n    _armatureDisPlay: dragonBones.ArmatureDisplay = null\r\n    _armature: dragonBones.Armature = null\r\n\r\n    onLoad() {\r\n        this.getArmature()\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    getArmature() {\r\n        //获取 ArmatureDisplay\r\n        this._armatureDisPlay = this.getComponent(dragonBones.ArmatureDisplay);\r\n        this.playAnimationByName(0);\r\n        //获取 Armatrue\r\n        this._armature = this._armatureDisPlay.armature();\r\n\r\n        if (this.autoChangeSkin)\r\n            this.changeSkin(PlayerDataMgr.getPlayerLv() - 1)\r\n        //添加动画监听\r\n        //this._armatureDisPlay.addEventListener(dragonBones.EventObject.COMPLETE, this.animationEventHandler, this);\r\n        //this._armatureDisPlay.addEventListener(dragonBones.EventObject.LOOP_COMPLETE, this.loopAnimationEventHandler, this);\r\n    }\r\n    playAnimationByName(index) {\r\n        switch (index) {\r\n            case 0:\r\n                this._armatureDisPlay.playAnimation('Ani_Mermaid_Stand', 0);\r\n                break;\r\n            case 1:\r\n                this._armatureDisPlay.playAnimation('Ani_Mermaid_Run', 0);\r\n                break;\r\n            case 2:\r\n                this._armatureDisPlay.playAnimation('Ani_Mermaid_Die', 1);\r\n                break;\r\n            case 3:\r\n                this._armatureDisPlay.playAnimation('Ani_Mermaid_Eat', 1);\r\n                break;\r\n            case 4:\r\n                this._armatureDisPlay.playAnimation('Ani_Mermaid_Win', 1);\r\n                break;\r\n        }\r\n        //this._armatureDisPlay.timeScale = 0.1;\r\n    }\r\n\r\n    animationEventHandler(event) {\r\n        // if (event.type == dragonBones.EventObject.COMPLETE) {\r\n        //     //this._armatureDisPlay.stopAnimation();\r\n        // }\r\n    }\r\n\r\n    loopAnimationEventHandler(event) {\r\n        //this._armatureDisPlay.enabled = false;\r\n        //console.log(event);\r\n        // if (event.type == dragonBones.EventObject.LOOP_COMPLETE) {\r\n\r\n        // }\r\n    }\r\n\r\n    changeSkin(index) {\r\n        this._armature.getSlot('mry_js1_l').displayIndex = index;\r\n        this._armature.getSlot('mry_js1_tf').displayIndex = index;\r\n        this._armature.getSlot('mry_js1_st').displayIndex = index;\r\n        this._armature.getSlot('mry_js1_s1').displayIndex = index;\r\n        this._armature.getSlot('mry_js1_s2').displayIndex = index;\r\n        this._armature.getSlot('mry_js2_pj').displayIndex = index;\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}