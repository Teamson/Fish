{"version":3,"sources":["assets\\ExportLibs\\View\\FullGameUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import JJHttp from \"../ExportHttpUtils\";\r\nimport JJMgr from \"../ExportUtils\";\r\nimport Utility from \"../../Scripts/Mod/Utility\";\r\nimport WxApi from \"../../Scripts/Libs/WxApi\";\r\nimport AdMgr from \"../../Scripts/Mod/AdMgr\";\r\nimport PlayerDataMgr from \"../../Scripts/Libs/PlayerDataMgr\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class FullGameUI extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    item: cc.Node = null\r\n\r\n    @property(cc.ScrollView)\r\n    scroll: cc.ScrollView = null\r\n\r\n    @property(cc.Node)\r\n    content: cc.Node = null\r\n\r\n    myNavArr: any[] = []\r\n\r\n    hotArr: number[] = []\r\n\r\n    closeCallback: Function = null\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    showUI(callback?: Function, param?: any) {\r\n        if (callback) {\r\n            this.closeCallback = callback\r\n        }\r\n        this.node.active = true\r\n        WxApi.aldEvent('网红爆款全屏幕导出页出现次数')\r\n    }\r\n\r\n    onEnable() {\r\n        this.myNavArr = [].concat(JJMgr.instance.navigateAppArr)\r\n        this.getHotRandArr()\r\n        this._init()\r\n        if (JJMgr.instance.exportCfg.front_all_screen_auto) {\r\n            this.randomNav()\r\n        }\r\n        Utility.delayActive(this.node.getChildByName('continueBtn'), JJMgr.instance.exportCfg.front_export_delay / 1000, this)\r\n\r\n        AdMgr.instance.hideBanner()\r\n        this.scheduleOnce(() => {\r\n            WxApi.bannerWuChu2()\r\n        }, JJMgr.instance.exportCfg.front_export_delay / 1000)\r\n\r\n        this.node.getChildByName('randomBtn').active = WxApi.isValidBanner() &&\r\n            PlayerDataMgr.getPlayerData().grade >= JJMgr.instance.exportCfg.front_randompaly_start_level\r\n    }\r\n\r\n    onDisable() {\r\n        clearTimeout(WxApi.bannerTO2)\r\n        AdMgr.instance.hideBanner()\r\n        this.unscheduleAllCallbacks()\r\n        this.content.destroyAllChildren()\r\n        this.closeCallback && this.closeCallback()\r\n        this.closeCallback = null\r\n    }\r\n\r\n    getHotRandArr() {\r\n        this.hotArr = []\r\n        let arr: number[] = [0, 1, 2, 3, 4, 5, 6, 7, 8]\r\n        arr = JJMgr.instance.shuffleArr(arr)\r\n        this.hotArr = arr.slice(0, 3)\r\n    }\r\n\r\n    _init() {\r\n        for (let i = 0; i < this.myNavArr.length; i++) {\r\n            let node: cc.Node = cc.instantiate(this.item)\r\n            node.active = true\r\n            this.content.addChild(node)\r\n\r\n            let colorBar: cc.Sprite = node.getChildByName('colorBar').getComponent(cc.Sprite)\r\n            let name: cc.Label = node.getChildByName('name').getComponent(cc.Label)\r\n            let icon: cc.Sprite = node.getChildByName('icon').getComponent(cc.Sprite)\r\n            let hot: cc.Node = node.getChildByName('hot')\r\n\r\n            JJMgr.instance.loadSpriteFrame('ExportRes/' + (Math.floor(i % 9) + 1), colorBar)\r\n            name.string = JJMgr.instance.getSubtitle(i)\r\n            JJMgr.instance.loadImgByUrl(icon, this.myNavArr[i].icon)\r\n            hot.active = this.hotArr.indexOf(i) != -1\r\n\r\n            node.on(cc.Node.EventType.TOUCH_END, (event) => { this.navCB(event, i) }, this)\r\n        }\r\n    }\r\n\r\n    continueCB() {\r\n        this.node.active = false\r\n    }\r\n\r\n    randomNav() {\r\n        let id = Math.floor(Math.random() * 6)\r\n        this.navCB(null, id)\r\n    }\r\n\r\n    navCB(event: cc.Event, id: number) {\r\n        console.log('click id:', id)\r\n        WxApi.aldEvent('网红爆款全屏幕导出页-总点击数')\r\n        JJMgr.instance.NavigateApp(id, () => { }, () => {\r\n            WxApi.aldEvent('网红爆款全屏幕导出页-总成功跳转数')\r\n        })\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}