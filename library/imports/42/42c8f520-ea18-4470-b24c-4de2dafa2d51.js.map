{"version":3,"sources":["assets\\Scripts\\UI\\LoadingUI.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uCAAkC;AAKlC,uDAAkD;AAG5C,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAG5C;IAAuC,6BAAY;IADnD;QAAA,qEA2DC;QAvDG,UAAI,GAAmB,IAAI,CAAA;;QAsD3B,iBAAiB;IACrB,CAAC;IArDG,0BAAM,GAAN;QACI,YAAY,CAAC,KAAK,EAAE,CAAA;QACpB,EAAE,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC,OAAO,GAAG,IAAI,CAAA;QAC9C,mDAAmD;QACnD,qDAAqD;QACrD,qCAAqC;QACrC,oDAAoD;QAEpD,uBAAa,CAAC,aAAa,EAAE,CAAA;QAC7B,yBAAyB;QAEzB,eAAK,CAAC,QAAQ,CAAC;YACX,YAAY,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAA;YACjE,YAAY,CAAC,OAAO,CAAC,oBAAoB,EAAE,eAAK,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC,CAAA;QACnF,CAAC,CAAC,CAAA;IACN,CAAC;IAED,yBAAK,GAAL;QACI,+BAA+B;QADnC,iBAiCC;QA9BG,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,YAAY,EAAE,UAAC,aAAqB,EAAE,UAAkB;YAC7E,KAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,aAAa,GAAG,UAAU,CAAA;QACnD,CAAC,EAAE;YACC,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAY,CAAC,CAAA;QACvC,CAAC,CAAC,CAAA;QACF,oCAAoC;QACpC,8FAA8F;QAC9F,0DAA0D;QAC1D,iBAAiB;QACjB,8CAA8C;QAC9C,SAAS;QACT,KAAK;QAEL,+CAA+C;QAC/C,oCAAoC;QACpC,mCAAmC;QACnC,cAAc;QACd,oDAAoD;QACpD,yDAAyD;QACzD,iDAAiD;QACjD,QAAQ;QACR,2CAA2C;QAC3C,qGAAqG;QACrG,iEAAiE;QACjE,wBAAwB;QACxB,+CAA+C;QAC/C,qDAAqD;QACrD,gBAAgB;QAChB,YAAY;QACZ,KAAK;IACT,CAAC;IApDD;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;2CACE;IAHV,SAAS;QAD7B,OAAO;OACa,SAAS,CA0D7B;IAAD,gBAAC;CA1DD,AA0DC,CA1DsC,EAAE,CAAC,SAAS,GA0DlD;kBA1DoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["import WxApi from \"../Libs/WxApi\";\r\nimport HttpMgr from \"../Mod/HttpMgr\";\r\nimport ShareMgr from \"../Mod/ShareMgr\";\r\nimport AdMgr from \"../Mod/AdMgr\";\r\nimport SoundMgr from \"../Mod/SoundMgr\";\r\nimport PlayerDataMgr from \"../Libs/PlayerDataMgr\";\r\nimport JJMgr from \"../../ExportLibs/ExportUtils\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LoadingUI extends cc.Component {\r\n\r\n    @property(cc.ProgressBar)\r\n    pBar: cc.ProgressBar = null\r\n\r\n    onLoad() {\r\n        localStorage.clear()\r\n        cc.director.getPhysicsManager().enabled = true\r\n        // cc.director.getCollisionManager().enabled = true\r\n        // cc.director.getPhysicsManager().debugDrawFlags = 1\r\n        // cc.find('ExportNode').zIndex = 999\r\n        // cc.game.addPersistRootNode(cc.find('ExportNode'))\r\n\r\n        PlayerDataMgr.getPlayerData()\r\n        //AdMgr.instance.initAd()\r\n\r\n        WxApi.WxOnHide(() => {\r\n            localStorage.setItem('lastDate', new Date().getDate().toString())\r\n            localStorage.setItem('front_share_number', WxApi.front_share_number.toString())\r\n        })\r\n    }\r\n\r\n    start() {\r\n        //ShareMgr.instance.initShare()\r\n\r\n        cc.director.preloadScene('StartScene', (completeCount: number, totalCount: number) => {\r\n            this.pBar.progress = completeCount / totalCount\r\n        }, () => {\r\n            cc.director.loadScene('StartScene')\r\n        })\r\n        // SoundMgr.Share.loadSounds(() => {\r\n        //     cc.director.preloadScene('StartScene', (completeCount: number, totalCount: number) => {\r\n        //         this.pBar.progress = completeCount / totalCount\r\n        //     }, () => {\r\n        //         cc.director.loadScene('StartScene')\r\n        //     })\r\n        // })\r\n\r\n        // JJMgr.instance.initJJ(WxApi.version, () => {\r\n        //     ShareMgr.instance.initShare()\r\n        //     WxApi.calculateShareNumber()\r\n        //     //获取场景值\r\n        //     if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n        //         WxApi.sceneId = WxApi.GetLaunchPassVar().scene\r\n        //         console.log('sceneId:', WxApi.sceneId)\r\n        //     }\r\n        //     // SoundMgr.Share.loadSounds(() => {\r\n        //     //     cc.director.preloadScene('StartScene', (completeCount: number, totalCount: number) => {\r\n        //     //         this.pBar.progress = completeCount / totalCount\r\n        //     //     }, () => {\r\n        //     //         WxApi.aldEvent('成功加载进入游戏内人数')\r\n        //     //         cc.director.loadScene('StartScene')\r\n        //     //     })\r\n        //     // })\r\n        // })\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}