{"version":3,"sources":["assets\\Scripts\\Crl\\Player.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,+CAA0C;AAC1C,yCAAoC;AAE9B,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAG5C;IAAoC,0BAAY;IADhD;QAAA,qEAwDC;QArDG,YAAM,GAAc,IAAI,CAAA;QAExB,eAAS,GAAY,IAAI,CAAA;QAEzB,aAAO,GAAY,KAAK,CAAA;QAExB,cAAQ,GAAY,KAAK,CAAA;QACzB,eAAS,GAAW,CAAC,CAAA;QACrB,gBAAU,GAAW,CAAC,CAAA;;QA4CtB,iBAAiB;IACrB,CAAC;IA3CG,uBAAM,GAAN;QACI,IAAI,CAAC,SAAS,GAAG,mBAAS,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAA;QACjE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,mBAAS,CAAC,CAAA;IAC/D,CAAC;IAED,sBAAK,GAAL;IAEA,CAAC;IAED,MAAM;IACN,wBAAO,GAAP;QAAA,iBAQC;QAPG,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAA;QAC3B,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAA;QAClC,IAAI,CAAC,YAAY,CAAC;YACd,KAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;YACtD,KAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAA;QAChC,CAAC,EAAE,CAAC,CAAC,CAAA;QACL,IAAI,CAAC,OAAO,GAAG,IAAI,CAAA;IACvB,CAAC;IAED,4BAAW,GAAX,UAAY,KAAa;QAAzB,iBAoBC;QAnBG,OAAO,IAAI,OAAO,CAAC,UAAC,EAAE,EAAE,EAAE;YACtB,IAAI,KAAI,CAAC,QAAQ,EAAE;gBACf,EAAE,EAAE,CAAA;gBACJ,OAAM;aACT;YACD,IAAI,MAAM,GAAG,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,CAAA;YACzD,KAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,KAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;YACjF,KAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAA;YAClC,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAA;YACpB,IAAI,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,KAAI,CAAC,SAAS,EAAE,MAAM,CAAC,CAAA;YAC1C,IAAI,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAC;gBACjB,KAAI,CAAC,UAAU,GAAG,KAAK,CAAA;gBACvB,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAA;gBACrB,KAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAA;gBAClC,EAAE,EAAE,CAAA;YACR,CAAC,CAAC,CAAA;YACF,IAAI,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;YAC5B,KAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAA;QAC3B,CAAC,CAAC,CAAA;IACN,CAAC;IApDgB,MAAM;QAD1B,OAAO;OACa,MAAM,CAuD1B;IAAD,aAAC;CAvDD,AAuDC,CAvDmC,EAAE,CAAC,SAAS,GAuD/C;kBAvDoB,MAAM","file":"","sourceRoot":"/","sourcesContent":["import Level1 from \"./Level/Level1\";\r\nimport LevelBase from \"./Level/LevelBase\";\r\nimport PlayerAni from \"./PlayerAni\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Player extends cc.Component {\r\n\r\n    aniCrl: PlayerAni = null\r\n\r\n    pointNode: cc.Node = null\r\n\r\n    gotMeat: boolean = false\r\n\r\n    isMoving: boolean = false\r\n    moveSpeed: number = 1\r\n    pointIndex: number = 0\r\n\r\n    onLoad() {\r\n        this.pointNode = LevelBase.Share.node.getChildByName('PointNode')\r\n        this.aniCrl = this.node.children[0].getComponent(PlayerAni)\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    //吃掉食物\r\n    eatMean() {\r\n        this.node.pauseAllActions()\r\n        this.aniCrl.playAnimationByName(3)\r\n        this.scheduleOnce(() => {\r\n            this.aniCrl.playAnimationByName(this.isMoving ? 1 : 0)\r\n            this.node.resumeAllActions()\r\n        }, 1)\r\n        this.gotMeat = true\r\n    }\r\n\r\n    moveToPoint(index: number) {\r\n        return new Promise((rs, rj) => {\r\n            if (this.isMoving) {\r\n                rs()\r\n                return\r\n            }\r\n            let desPos = this.pointNode.children[index].getPosition()\r\n            this.node.scaleX = Math.abs(this.node.scaleX) * (desPos.x < this.node.x ? 1 : -1)\r\n            this.aniCrl.playAnimationByName(1)\r\n            this.isMoving = true\r\n            let a1 = cc.moveTo(this.moveSpeed, desPos)\r\n            let a2 = cc.callFunc(() => {\r\n                this.pointIndex = index\r\n                this.isMoving = false\r\n                this.aniCrl.playAnimationByName(0)\r\n                rs()\r\n            })\r\n            let a3 = cc.sequence(a1, a2)\r\n            this.node.runAction(a3)\r\n        })\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}