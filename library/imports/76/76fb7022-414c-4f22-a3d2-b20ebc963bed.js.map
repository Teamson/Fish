{"version":3,"sources":["assets\\Scripts\\UI\\GameUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import JJMgr from \"../../ExportLibs/ExportUtils\";\r\nimport LevelBase from \"../Crl/Level/LevelBase\";\r\nimport PlayerAni from \"../Crl/PlayerAni\";\r\nimport PlayerDataMgr from \"../Libs/PlayerDataMgr\";\r\nimport TimeCountMgr from \"../Libs/TimeCountMgr\";\r\nimport WxApi from \"../Libs/WxApi\";\r\nimport AdMgr from \"../Mod/AdMgr\";\r\nimport ShareMgr from \"../Mod/ShareMgr\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameUI extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    GetPowerUI: cc.Node = null\r\n\r\n    @property(cc.Label)\r\n    powerNum: cc.Label = null\r\n    @property(cc.Label)\r\n    powerTime: cc.Label = null\r\n\r\n    @property(cc.Label)\r\n    gradeNum: cc.Label = null\r\n    @property(cc.Label)\r\n    tipsNum: cc.Label = null\r\n\r\n    @property(PlayerAni)\r\n    NextPlayerAni: PlayerAni = null\r\n    @property(cc.Label)\r\n    lvNum: cc.Label = null\r\n    @property(cc.ProgressBar)\r\n    lvBar: cc.ProgressBar = null\r\n    @property(cc.Node)\r\n    lvNode: cc.Node = null\r\n\r\n    onLoad() { }\r\n\r\n    start() {\r\n        this.lvNode.active = PlayerDataMgr.getPlayerLv() < 5\r\n        this.lvNum.string = PlayerDataMgr.getPlayerLv().toString()\r\n        this.lvBar.progress = PlayerDataMgr.getNextLvPer()\r\n        let nextLv = PlayerDataMgr.getPlayerLv()\r\n        this.NextPlayerAni.changeSkin(nextLv <= 4 ? nextLv : 4)\r\n        \r\n        AdMgr.instance.hideBanner()\r\n        if (WxApi.isValidBanner() && JJMgr.instance.exportCfg.front_main_banner_switch) {\r\n            AdMgr.instance.showBanner()\r\n        }\r\n    }\r\n\r\n    getPowerBtnCB() {\r\n        if (LevelBase.Share.isGameOver) return\r\n        this.GetPowerUI.active = true\r\n    }\r\n\r\n    skipBtnCB() {\r\n        if (LevelBase.Share.isGameOver) return\r\n        let cb = () => {\r\n            LevelBase.Share.winCB()\r\n        }\r\n        ShareMgr.instance.shareGame(cb)\r\n    }\r\n\r\n    tipsBtnCB() {\r\n\r\n    }\r\n\r\n    calculatePowerTime() {\r\n        let t = TimeCountMgr.Share.tCount\r\n        let m = Math.floor(t / 60)\r\n        let s = Math.floor(t - m * 60)\r\n        this.powerTime.string = m.toString() + ':' + s.toString()\r\n        this.powerNum.string = PlayerDataMgr.getPlayerData().power.toString()\r\n        this.powerTime.node.active = PlayerDataMgr.getPlayerData().power < PlayerDataMgr.powerMax\r\n    }\r\n\r\n    update(dt) {\r\n        this.calculatePowerTime()\r\n        this.gradeNum.string = PlayerDataMgr.getPlayerData().grade.toString()\r\n        this.tipsNum.string = PlayerDataMgr.getPlayerData().tipsNum.toString()\r\n    }\r\n}\r\n"]}